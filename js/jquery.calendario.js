!function($,window,undefined){"use strict";$.Calendario=function(options,element){this.$el=$(element),this._init(options)},$.Calendario.defaults={weeks:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekabbrs:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthabbrs:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],displayWeekAbbr:!1,displayMonthAbbr:!1,startIn:1,onDayClick:function($el,$content,dateProperties){return!1}},$.Calendario.prototype={_init:function(options){this.options=$.extend(!0,{},$.Calendario.defaults,options),this.today=new Date,this.month=isNaN(this.options.month)||null==this.options.month?this.today.getMonth():this.options.month-1,this.year=isNaN(this.options.year)||null==this.options.year?this.today.getFullYear():this.options.year,this.caldata=this.options.caldata||{},this._generateTemplate(),this._initEvents()},_initEvents:function(){var self=this;this.$el.on("click.calendario","div.fc-row > div",function(){var $cell=$(this),idx=$cell.index(),$content=$cell.children("div"),dateProp={day:$cell.children("span.fc-date").text(),month:self.month+1,monthname:self.options.displayMonthAbbr?self.options.monthabbrs[self.month]:self.options.months[self.month],year:self.year,weekday:idx+self.options.startIn,weekdayname:self.options.weeks[idx+self.options.startIn]};dateProp.day&&self.options.onDayClick($cell,$content,dateProp)})},_generateTemplate:function(callback){var head=this._getHead(),body=this._getBody(),rowClass;switch(this.rowTotal){case 4:rowClass="fc-four-rows";break;case 5:rowClass="fc-five-rows";break;case 6:rowClass="fc-six-rows"}this.$cal=$('<div class="fc-calendar '+rowClass+'">').append(head,body),this.$el.find("div.fc-calendar").remove().end().append(this.$cal),callback&&callback.call()},_getHead:function(){for(var html='<div class="fc-head">',i=0;i<=6;i++){var pos=i+this.options.startIn,j=pos>6?pos-6-1:pos;html+="<div>",html+=this.options.displayWeekAbbr?this.options.weekabbrs[j]:this.options.weeks[j],html+="</div>"}return html+="</div>"},_getBody:function(){var d,monthLength=new Date(this.year,this.month+1,0).getDate(),firstDay=new Date(this.year,this.month,1);this.startingDay=firstDay.getDay();for(var html='<div class="fc-body clearfix"><div class="fc-row">',day=1,i=0;i<7;i++){for(var j=0;j<=6;j++){var pos=this.startingDay-this.options.startIn,p=pos<0?6+pos+1:pos,inner="",today=this.month===this.today.getMonth()&&this.year===this.today.getFullYear()&&day===this.today.getDate(),content="";if(day<=monthLength&&(i>0||j>=p)){inner+='<span class="fc-date">'+day+'</span><span class="fc-weekday">'+this.options.weekabbrs[j+this.options.startIn>6?j+this.options.startIn-6-1:j+this.options.startIn]+"</span>";var strdate=(this.month+1<10?"0"+(this.month+1):this.month+1)+"-"+(day<10?"0"+day:day)+"-"+this.year,dayData=this.caldata[strdate];dayData&&(content=dayData),""!==content&&(inner+="<div>"+content+"</div>"),++day}else today=!1;var cellClasses=today?"fc-today ":"";""!==content&&(cellClasses+="fc-content"),html+=""!==cellClasses?'<div class="'+cellClasses+'">':"<div>",html+=inner,html+="</div>"}if(day>monthLength){this.rowTotal=i+1;break}html+='</div><div class="fc-row">'}return html+="</div></div>"},_isValidDate:function(date){date=date.replace(/-/gi,"");var month=parseInt(date.substring(0,2),10),day=parseInt(date.substring(2,4),10),year=parseInt(date.substring(4,8),10);return!(month<1||month>12)&&(!(day<1||day>31)&&((4!=month&&6!=month&&9!=month&&11!=month||!(day>30))&&((2!=month||year%400!=0&&year%4!=0||year%100==0||!(day>29))&&(!(2==month&&year%100==0&&day>29)&&{day:day,month:month,year:year}))))},_move:function(period,dir,callback){"previous"===dir?"month"===period?(this.year=this.month>0?this.year:--this.year,this.month=this.month>0?--this.month:11):"year"===period&&(this.year=--this.year):"next"===dir&&("month"===period?(this.year=this.month<11?this.year:++this.year,this.month=this.month<11?++this.month:0):"year"===period&&(this.year=++this.year)),this._generateTemplate(callback)},getYear:function(){return this.year},getMonth:function(){return this.month+1},getMonthName:function(){return this.options.displayMonthAbbr?this.options.monthabbrs[this.month]:this.options.months[this.month]},getCell:function(day){var row=Math.floor((day+this.startingDay-this.options.startIn)/7),pos=day+this.startingDay-this.options.startIn-7*row-1;return this.$cal.find("div.fc-body").children("div.fc-row").eq(row).children("div").eq(pos).children("div")},setData:function(caldata){caldata=caldata||{},$.extend(this.caldata,caldata),this._generateTemplate()},gotoNow:function(callback){this.month=this.today.getMonth(),this.year=this.today.getFullYear(),this._generateTemplate(callback)},goto:function(month,year,callback){this.month=month,this.year=year,this._generateTemplate(callback)},gotoPreviousMonth:function(callback){this._move("month","previous",callback)},gotoPreviousYear:function(callback){this._move("year","previous",callback)},gotoNextMonth:function(callback){this._move("month","next",callback)},gotoNextYear:function(callback){this._move("year","next",callback)}};var logError=function(message){window.console&&window.console.error(message)};$.fn.calendario=function(options){var instance=$.data(this,"calendario");if("string"==typeof options){var args=Array.prototype.slice.call(arguments,1);this.each(function(){instance?$.isFunction(instance[options])&&"_"!==options.charAt(0)?instance[options].apply(instance,args):logError("no such method '"+options+"' for calendario instance"):logError("cannot call methods on calendario prior to initialization; attempted to call method '"+options+"'")})}else this.each(function(){instance?instance._init():instance=$.data(this,"calendario",new $.Calendario(options,this))});return instance}}(jQuery,window);